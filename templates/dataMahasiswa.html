{% include 'header.html' %}
<div class="content-wrap">
    <div class="main">
        <div class="container-fluid">
            <div id="main-content">
                <div class="row">
                    <div class="col-lg-8 p-r-0 title-margin-right">
                        <div class="page-header">
                            <div class="page-title">
                                <h2>
                                    {{title}}
                                </h2>
                            </div>
                        </div>
                    </div>
                    <!-- /# column -->
                    <div class="col-lg-4 p-l-0 title-margin-left">
                        <div class="page-header">
                            <div class="page-title">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item active">
                                        {{title}}
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- /# column -->
                </div>

                {% with messages = get_flashed_messages() %}
                    {% if messages %}
                        {% for message in messages %}
                            {{ message }}
                        {% endfor %}
                    {% endif %}
                {% endwith %}


                <div class="row">
                    <div class="col-lg-3">
                        <div class="card p-0">
                            <div class="stat-widget-three">
                                <div class="stat-icon bg-success">
                                    <i class="ti-check"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-digit">
                                        {% for item in data_tepat %}
                                        {{item[0]}}
                                        {% endfor %}
                                    </div>
                                    <div class="stat-text">Total Prediksi Data Tepat Waktu</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="card p-0">
                            <div class="stat-widget-three">
                                <div class="stat-icon bg-warning">
                                    <i class="ti-alert"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-digit">
                                        {% for item in data_terlambat %}
                                        {{item[0]}}
                                        {% endfor %}
                                    </div>
                                    <div class="stat-text">Total Prediksi Data Terlambat</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="card p-0">
                            <div class="stat-widget-three">
                                <div class="stat-icon bg-primary">
                                    <i class="ti-pie-chart"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-digit">
                                        350 : 99
                                    </div>
                                    <div class="stat-text">Proporsi Split Data Training</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="card p-0">
                            <div class="stat-widget-three">
                                <div class="stat-icon bg-dark">
                                    <i class="ti-timer"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-digit">
                                        {% for item in waktu %}
                                        {{item[0]}}
                                        {% endfor %} detik
                                    </div>
                                    <div class="stat-text">Waktu Perhitungan Algoritma</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-12">
                        <div class="row">
                            <div class="col-lg-9 p-r-0 title-margin-right">
                                <form method="post" action="/upload_mahasiswa" enctype="multipart/form-data" class="form-inline">
                                    <input class="form-control input-default m-b-10 m-l-10" type="file" name="file">
                                    <input type="submit" value="Upload" class="btn btn-primary m-b-10 m-l-10">
                                    <div><a id="template_alumni" href="/template_mhs" class="input-default btn btn-default m-b-10 m-l-10"><i class="ti-import"> </i>Download Template</a></div>
                                </form>
                            </div>
                            <!-- /# column -->
                            <div class="col-lg-3 p-l-100 margin-left">
                                <div class="row">
                                    <div><a id="export_pdf_button" href="#" class="btn btn-default m-b-10 m-l-10"><i class="ti-export"> </i>Export PDF</a></div>
                                    <div><a id="export_excel_button" href="#" class="input-default btn btn-default m-l-10"><i class="ti-export"> </i>Export Excel</a></div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="jsgrid-table-panel">
                                <!-- /.card-header -->
                                <div class="card-body">
                                    <select id="kelas" name="kelas" class="form-control input-default col-lg-2 m-b-10 m-l-8">
                                        <option value="">--Semua Kelas--</option>
                                        {% for kelas in kelas %}
                                        <option value="{{ kelas[0] }}">{{ kelas[0] }}</option>
                                        {% endfor %}
                                    </select>
                                    <table id="example1" class="table table-bordered table-striped">
                                        <thead>
                                            <tr>
                                                <th>NIM</th>
                                                <th>Nama</th>
                                                <th>Kelas</th>
                                                <th>Riwayat Cuti</th>
                                                <th>Status KP</th>
                                                <th>IPS1</th>
                                                <th>IPS2</th>
                                                <th>IPS3</th>
                                                <th>IPS4</th>
                                                <th>IPS5</th>
                                                <th>IPS6</th>
                                                <th>CO</th>
                                                <th>Kompen</th>
                                                <th>TAK</th>
                                                <th>Prediksi Status Kelulusan</th>
                                                <th>Aksi</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for item in data %}
                                            <tr>
                                                <td>{{item[0]}}</td>
                                                <td>{{item[1]}}</td>
                                                <td>{{item[2]}}</td>
                                                <td>{{item[3]}}</td>
                                                <td>{{item[4]}}</td>
                                                <td>{{item[5]}}</td>
                                                <td>{{item[6]}}</td>
                                                <td>{{item[7]}}</td>
                                                <td>{{item[8]}}</td>
                                                <td>{{item[9]}}</td>
                                                <td>{{item[10]}}</td>
                                                <td>{{item[11]}}</td>
                                                <td>{{item[12]}}</td>
                                                <td>{{item[13]}}</td>
                                                <td>
                                                    {% if item[14] == 'Tidak Tepat Waktu' %}
                                                    <span class='mb-0 badge badge-warning'>Tidak Tepat Waktu</span>
                                                    {% elif item[14] == 'Tepat Waktu' %}
                                                    <span class='mb-0 badge badge-success'>Tepat Waktu</span>
                                                    {% endif %}
                                                </td>
                                                <td>
                                                    <!-- Trigger Detail -->
                                                    <a href="" class="btn btn-info btn-sm" data-toggle="modal" data-target="#modal-default{{item[0]}}">Detail</a>
                                                    <!-- Modal -->
                                                    <div class="modal fade" id="modal-default{{item[0]}}">
                                                        <div class="modal-dialog">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h4 class="text-dark">Detail Mahasiswa</h4>
                                                                    <button type="button" class="btn" data-dismiss="modal" aria-label="Close">
                                                                        <i class="fa fa-close"></i>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <!-- Profile Image -->
                                                                    <div class="card card-primary card-outline">
                                                                        <div class="card-body box-profile">
                                                
                                                                            <h3 class="profile-username text-center">
                                                                                {{item[1]}}
                                                                            </h3>
                                                
                                                                            <p class="text-muted text-center">
                                                
                                                                            </p>
                                                
                                                                            <ul class="list-group list-group-unbordered mb-3">
                                                                                <li class="list-group-item">
                                                                                    <b class="float-left">NIM</b>
                                                                                    <a class="float-right">
                                                                                        {{item[0]}}
                                                                                    </a>
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <b class="float-left">Kelas</b>
                                                                                    <a class="float-right">
                                                                                        {{item[2]}}
                                                                                    </a>
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <b class="float-left">Riwayat Cuti</b>
                                                                                    <a class="float-right">
                                                                                        {{item[3]}}
                                                                                    </a>
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <b class="float-left">Status KP</b>
                                                                                    <a class="float-right">
                                                                                        {{item[4]}}
                                                                                    </a>
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <b class="float-left">IPS1</b>
                                                                                    <a class="float-right">
                                                                                        {{item[5]}}
                                                                                    </a>
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <b class="float-left">IPS 2</b>
                                                                                    <a class="float-right">
                                                                                        {{item[6]}}
                                                                                    </a>
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <b class="float-left">IPS 3</b>
                                                                                    <a class="float-right">
                                                                                        {{item[7]}}
                                                                                    </a>
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <b class="float-left">IPS 4</b>
                                                                                    <a class="float-right">
                                                                                        {{item[8]}}
                                                                                    </a>
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <b class="float-left">IPS 5</b>
                                                                                    <a class="float-right">
                                                                                        {{item[9]}}
                                                                                    </a>
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <b class="float-left">IPS 6</b>
                                                                                    <a class="float-right">
                                                                                        {{item[10]}}
                                                                                    </a>
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <b class="float-left">Carry Over</b> <a class="float-right">
                                                                                        {{item[11]}}
                                                                                    </a>
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <b class="float-left">Kompensasi</b> <a class="float-right">
                                                                                        {{item[12]}}
                                                                                    </a>
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <b class="float-left">TAK</b>
                                                                                    <a class="float-right">
                                                                                        {{item[13]}}
                                                                                    </a>
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <b class="float-left">Prediksi Status Kelulusan</b> <a class="float-right">
                                                                                        {% if item[14] == 'Tidak Tepat Waktu' %}
                                                                                        <span class='mb-0 badge badge-warning'>Tidak Tepat Waktu</span>
                                                                                        {% elif item[14] == 'Tepat Waktu' %}
                                                                                        <span class='mb-0 badge badge-success'>Tepat Waktu</span>
                                                                                        {% endif %}
                                                                                    </a>
                                                                                </li>
                                                                            </ul>
                                                                        </div>
                                                                        <!-- /.card-body -->
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer justify-content-between">
                                                                    <button type="button" class="btn btn-primary" data-dismiss="modal">Tutup</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- /# card -->
                        </div>
                    </div>
                </div>
            </div>

            <script>
                document.querySelector("#export_excel_button").addEventListener("click", function () {
                    var selected_class = document.querySelector("#kelas").value;
                    window.location.href = "/export_mhs_excel?kelas=" + selected_class;
                });
                document.querySelector("#export_pdf_button").addEventListener("click", function () {
                    var selected_class = document.querySelector("#kelas").value;
                    window.location.href = "/export_mhs?kelas=" + selected_class;
                });
            </script>

{% include 'footer.html' %}